# 일정관리 앱

## 사전지식

### 인증

-   `서버`와 `사용자`간 통신 하는 `정보`와 `유효성`을 `검증`하는 기능.
-   여러 사용자가 이용하는 앱이 서버와 통신 시 `인증`과정이 생략이 된다면 개인의 정보가 다른 사용자에게 노출이 되는 문제점이 발생 함. 이러한 문제를 해결하기 위해 개인인증을 통하여 인증된 데이터만 제공할 수 있음.
-   사용자가 서버에 데이터를 요청할 때 인증정보는 제공하면 서버는 인증된 사용자의 정보만 제공 함.

### JWT란?

-   사용자의 정보를 요청할 때 서버에 매 요청시마다 사용자 계정 정보를 입력할 필요 없이 통신할 수 있는 암호화된 인증 토큰.
-   JWT는 `Header`, `Payload`, `Signature` 세개의 요소로 구성되어 있음.
    -   `base64`로 인코딩 되어 있음
    -   `Header`: 토큰의 암호화 알고리즘, 토큰타입을 지정함
    -   `Payload`: 사용자에게 제공 또는 서버에서 사용되는 실제 정보 영역
    -   `Signature`: 토큰의 유효성 검증을 위한 코드. 시크릿값을 지정하여 인코딩을 하면 디코딩 시 시크릿값이 없으면 디코딩이 불가능 함.

### `액세스토큰`과 `리프레시토큰`

1. 액세스토큰

    - 서버의 정보를 요청 시 필요한 토큰
    - 리프래시토큰보다 유효기간이 짧게 설정 함.

2. 리프래시토큰

    - 액세스토큰이 만료 되었을 때 재발급 받을 때 필요한 토큰
    - 서버에 요청시마다 사용되는 액세스토큰과는 달리 액세스토큰을 발급받을 때만 사용되므로 탈취의 확률이 낮기 때문에 액세스토큰보다 유효기간을 길게 설정함.

### JWT를 이용한 인증절차

#### 유즈케이스

1. 토큰 발급
    1. 사용자가 서버에 사용자 계정정보를 제공
    2. 서버에서 사용자 검증
    3. 서버가 사용자에 액세스토큰, 리프레시토큰 제공

2. 액세스토큰 사용

    1. 사용자가 서버에 액세스토큰을 Header에 담아서 API 요청
    2. 액세스 토큰으로 사용자 검증
    3. 서버가 사용자에 데이터 제공

3. 토큰의 만료

    1. 사용자가 서버에 액세스토큰을 Header에 담아서 API 요청
    2. 액세스 토큰으로 사용자 검증
    3. 서버가 사용자에 토큰의 유효기간 만료 응답
    4. 사용자가 액세스토큰을 다시 받기 위해 리프레시 토큰 제공
    5. 서버가 리프레시토큰 검증
    6. 새로운 액세스토큰을 사용자에 제공
    7. 사용자가 서버에 새로운 액세스토큰을 Header에 담아서 API 요청
    8. 액세스 토큰으로 사용자 검증
    9. 서버가 사용자에 데이터 제공
